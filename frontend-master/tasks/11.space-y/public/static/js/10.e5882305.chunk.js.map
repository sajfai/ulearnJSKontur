{"version":3,"sources":["pages/SendToMars/SendToMars.module.css","pages/SendToMars/SendToMars.js"],"names":["module","exports","SendToMars","useContext","ResourceContext","resource","setResource","useTransition","SUSPENSE_CONFIG","startTransition","isPending","items","read","className","cs","content","onSubmit","e","preventDefault","data","FormData","target","itemsPromise","window","client","sendToMars","keys","Object","fromEntries","map","key","get","pick","wrapPromise","disabled","form","required","type","name","defaultValue","value","length","item","id","style","color","important","onClick","cancelSendingToMars"],"mappings":"6FACAA,EAAOC,QAAU,CAAC,QAAU,4BAA4B,MAAQ,0BAA0B,KAAO,2B,iGCoFlFC,UA7EI,KAAO,MAAD,EACSC,qBAAWC,KADpB,mBAChBC,EADgB,KACNC,EADM,OAEcC,wBAAcC,KAF5B,mBAEhBC,EAFgB,KAECC,EAFD,KAGjBC,EAAQN,EAASM,MAAMC,OAa7B,OACE,6BAASC,UAAWC,IAAGC,SACrB,4CACA,iCACE,0BAAMC,SAhBKC,IACfR,EAAgB,KACdQ,EAAEC,iBACF,MAAMC,EAAO,IAAIC,SAASH,EAAEI,QACtBC,EAAeC,OAAOC,OAAOC,WAX5B,EAACN,EAAMO,IAClBC,OAAOC,YAAYF,EAAKG,IAAIC,GAAO,CAACA,EAAKX,EAAKY,IAAID,MAW5CE,CAAKb,EAAM,CAAC,OAAQ,QAAS,SAAU,QAAS,eAElDb,EAAY,CACVK,MAAOsB,YAAYX,SASjB,8BAAUY,SAAUxB,EAAWG,UAAWC,IAAGqB,MAC3C,uCACO,2BAAOC,UAAQ,EAACC,KAAK,OAAOC,KAAK,UAExC,wCACQ,2BAAOF,UAAQ,EAACC,KAAK,MAAMC,KAAK,WAExC,yCACS,2BAAOD,KAAK,SAASC,KAAK,YAEnC,wCACQ,2BAAOD,KAAK,QAAQC,KAAK,QAAQC,aAAa,aAEtD,4CACY,2BAAOF,KAAK,WAAWC,KAAK,eAExC,wCACQ,2BAAOD,KAAK,SAASG,MAAM,aAKzC,iCACG7B,EAAM8B,OAAS,EACd,oCACE,uDACA,wBAAI5B,UAAWC,IAAGH,OACfA,EAAMkB,IAAIa,IAWT,OACE,wBAAIZ,IAAKY,EAAKC,GAAIC,MAAO,CAAEC,MAAOH,EAAKG,QACpCH,EAAKJ,KACLI,EAAKI,UAAY,QAAU,IAC5B,4BAAQC,QAdI,KACdtC,EAAgB,KACd,MAAMa,EAAeC,OAAOC,OAAOwB,oBACjCN,GAEFpC,EAAY,CACVK,MAAOsB,YAAYX,SAQrB,UAOV","file":"static/js/10.e5882305.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"SendToMars_content__BYVtj\",\"items\":\"SendToMars_items__3NxkZ\",\"form\":\"SendToMars_form__3TxP7\"};","import React, { useContext, useTransition } from \"react\";\nimport { ResourceContext } from \"../../components/Page\";\nimport cs from \"./SendToMars.module.css\";\nimport { SUSPENSE_CONFIG, wrapPromise } from \"../../constants\";\n\nconst pick = (data, keys) =>\n  Object.fromEntries(keys.map(key => [key, data.get(key)]));\n\nconst SendToMars = () => {\n  const [resource, setResource] = useContext(ResourceContext);\n  const [startTransition, isPending] = useTransition(SUSPENSE_CONFIG);\n  const items = resource.items.read();\n  const onSubmit = e => {\n    startTransition(() => {\n      e.preventDefault();\n      const data = new FormData(e.target);\n      const itemsPromise = window.client.sendToMars(\n        pick(data, [\"name\", \"phone\", \"weight\", \"color\", \"important\"])\n      );\n      setResource({\n        items: wrapPromise(itemsPromise)\n      });\n    });\n  };\n  return (\n    <section className={cs.content}>\n      <h1>Send to Mars</h1>\n      <section>\n        <form onSubmit={onSubmit}>\n          <fieldset disabled={isPending} className={cs.form}>\n            <label>\n              Name <input required type=\"text\" name=\"name\" />\n            </label>\n            <label>\n              Phone <input required type=\"tel\" name=\"phone\" />\n            </label>\n            <label>\n              Weight <input type=\"number\" name=\"weight\" />\n            </label>\n            <label>\n              Color <input type=\"color\" name=\"color\" defaultValue=\"#ffffff\" />\n            </label>\n            <label>\n              Important <input type=\"checkbox\" name=\"important\" />\n            </label>\n            <label>\n              Done? <input type=\"submit\" value=\"send\" />\n            </label>\n          </fieldset>\n        </form>\n      </section>\n      <section>\n        {items.length > 0 ? (\n          <>\n            <h2>Waiting for launch date</h2>\n            <ul className={cs.items}>\n              {items.map(item => {\n                const onClick = () => {\n                  startTransition(() => {\n                    const itemsPromise = window.client.cancelSendingToMars(\n                      item\n                    );\n                    setResource({\n                      items: wrapPromise(itemsPromise)\n                    });\n                  });\n                };\n                return (\n                  <li key={item.id} style={{ color: item.color }}>\n                    {item.name}\n                    {item.important ? \" (!) \" : \" \"}\n                    <button onClick={onClick}>X</button>\n                  </li>\n                );\n              })}\n            </ul>\n          </>\n        ) : (\n          <h2>Queue is empty</h2>\n        )}\n      </section>\n    </section>\n  );\n};\n\nexport default SendToMars;\n"],"sourceRoot":""}